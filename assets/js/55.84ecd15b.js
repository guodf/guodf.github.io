(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{439:function(s,a,n){"use strict";n.r(a);var t=n(1),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"mysql安装与配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql安装与配置"}},[s._v("#")]),s._v(" MySQL安装与配置")]),s._v(" "),n("p",[s._v("​\t第一次接触MySQL？")]),s._v(" "),n("p",[s._v("​\t我该下载哪个版本？")]),s._v(" "),n("p",[s._v("​\t我该使用哪种安装方式？")]),s._v(" "),n("p",[s._v("​\t不同的安装方式有什么不同？")]),s._v(" "),n("p",[s._v("​\t每次安装都要从网上查找安装教程？")]),s._v(" "),n("p",[s._v("​\t不同的系统，不同的包管理方式，如何一次学会在所有系统的上安装MySQL？")]),s._v(" "),n("p",[s._v("​\t想必很多新手都避免不了有这些疑问，都想一次性投入精力解决以上问题，下面我用我理解的方式帮助你解决这些疑问。")]),s._v(" "),n("h2",{attrs:{id:"示例环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例环境"}},[s._v("#")]),s._v(" 示例环境")]),s._v(" "),n("p",[n("code",[s._v("Centos8")]),s._v("，"),n("code",[s._v("MySQL 5.7.28")])]),s._v(" "),n("p",[s._v("由于MySQL官网还没有放出Centos8的安装包，我这里使用的是Centos7的tar包进行安装，不过我也尝试了Centos7的RPM包安装很顺畅没有任何问题，不过还是推荐最好使用mysql发布的相关平台包进行安装，避免不必要的麻烦。")]),s._v(" "),n("h2",{attrs:{id:"安装方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装方式"}},[s._v("#")]),s._v(" 安装方式")]),s._v(" "),n("ol",[n("li",[s._v("首先，安装MySQL依赖的第三方包")]),s._v(" "),n("li",[s._v("其次，下载MySQL的安装文件")]),s._v(" "),n("li",[s._v("然后，配置环境变量")]),s._v(" "),n("li",[s._v("最后，启动MySQL服务")])]),s._v(" "),n("h3",{attrs:{id:"如何使用tar包装出rpm的效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何使用tar包装出rpm的效果"}},[s._v("#")]),s._v(" 如何使用tar包装出RPM的效果")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("首先，安装MySQL依赖的第三方包")]),s._v(" "),n("p",[s._v("在不同系统中mysql依赖的包名可能不尽相同，需要自己试错")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# mysqld的依赖包\nyum install libaio\n# 这个包在centos8不需要安装\nyum install libnuma\n# mysql客户端工具需要下面的包\nyum install libncurses*\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("其次，下载MySQL的安装文件")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.28-el7-x86_64.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载地址：versioin 5.7.28"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 首先我们解压mysql到指定的目录中\ntar -zxvf data/mysql-5.7.28-el7-x86_64.tar.gz -C /usr/local/\n\n# 重命名目录名称\nmv /usr/local/mysql-5.7.28-el7-x86_64 /usr/local/mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("现在我们就将mysql安装到了/usr/local/mysql目录中，这也是RPM包中mysql的默认安装位置")])]),s._v(" "),n("li",[n("p",[s._v("然后，配置环境变量")]),s._v(" "),n("p",[n("code",[s._v("/root/.bash_profile")])]),s._v(" "),n("p",[s._v("在文件的最后添加如下配置文件，你也可以在其它你知道的可以配置环境变量的文件中添加如下配置，我通常喜欢配置在.bash_profile文件中，缺点是只有带你过去用户可用，如果系统中存在多个用户，需要配置在/etc目录中。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# mysql\nexport MYSQL_HOME=/usr/local/mysql\nPATH=$MYSQL_HOME/bin:$PATH\nexport PATH\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("让当前bash窗口生效，当然你也可以重新登录用户使配置生效。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让环境变量在当前bash窗口立即生效")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /root/.bash_profile\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用命令验证一下配置效果")]),s._v("\nmysql --version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("最后，启动MySQL服务")]),s._v(" "),n("p",[s._v("因为我们现在使用的tar包方式安装MySQL，所以没有办法直接使用"),n("code",[s._v("servie mysql start")]),s._v("或者"),n("code",[s._v("systemctl mysql start")]),s._v("的方式启动服务。")]),s._v(" "),n("p",[s._v("不过MySQL已经为我们准备好了服务文件，我们只需要将服务文件移动到对应的目录即可。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/local/mysql/mysql.server /etc/init.d/mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此时我们就可以使用下面命令，不过暂时下面的命令会报错，看后面解决")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql start "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#systemctl mysql start")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])])]),s._v(" "),n("p",[s._v("完成以上4步后，就跟RPM包的安装效果一样了。")]),s._v(" "),n("h2",{attrs:{id:"启动mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql"}},[s._v("#")]),s._v(" 启动MySQL")]),s._v(" "),n("p",[s._v("在"),n("code",[s._v("MySQL 5.7.*")]),s._v("的版本中默认"),n("code",[s._v("/usr/local/mysql")]),s._v("中不再自带data目录，而这个data目录是MySQL实例的数据目录，所以我们要先生成这个data目录。")]),s._v(" "),n("h4",{attrs:{id:"多种方式生成data目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多种方式生成data目录"}},[s._v("#")]),s._v(" 多种方式生成data目录")]),s._v(" "),n("ol",[n("li",[n("p",[n("strong",[s._v("使用下面的命令，我们使用默认的方式初始化mysql的data目录（不推荐）")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysqld --initialize\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("推荐使用配置文件的方式初始化mysql的data目录，mysql默认会从以下位置加载配置：")])]),s._v(" "),n("p",[n("code",[s._v("/etc/my.cnf")])]),s._v(" "),n("p",[n("code",[s._v("/etc/mysql/my.cnf")])]),s._v(" "),n("p",[n("code",[s._v("/usr/local/mysql/etc/my.cnf")])]),s._v(" "),n("p",[n("code",[s._v("/usr/local/mysql/my.cnf")])]),s._v(" "),n("p",[n("code",[s._v("~/.my.cnf")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 这里指定mysql客户端的默认连接端口\n[client]\nport=3306\n\n# 这里指定mysql服务的数据目录，可以修改\n[mysqld]\ndatadir=/mysql/data\nport = 3306\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("同样的命令初始化mysql，但是这次我们使用了my.cnf配置文件，我们将data目录指向了"),n("code",[s._v("/mysql/data")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysqld --initialize\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("为mysql指定系统账户（仅推荐在生成环境）")])]),s._v(" "),n("p",[s._v("上面例子，我们默认使用了当前登录的用户（root）来启动mysql，这通常是不安全的（但是推荐在开发环境中这么做）。下面我们可以使用指定的用户来启mysql服务。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个mysq用户组")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并添加一个名为mysql的用户，/bin/false限制这个用户不能使用shell方式登录，仅能用来启动数据库")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -r -g mysql -s /bin/false mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为mysql用户的权限小于root，所以我们给mysql加上访问/root/mysql/data目录的权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" mysql:mysql /mysql/data\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("750")]),s._v(" /mysql/data\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 指定用户初始化mysql数据目录，还是上面的配置文件，位置放在/usr/local/mysql/my.cnf")]),s._v("\nmysqld --initialize --user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("通过以上任意一种方式就可以初始化好数据目录了。")])])]),s._v(" "),n("h4",{attrs:{id:"启动mysql服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql服务"}},[s._v("#")]),s._v(" 启动mysql服务")]),s._v(" "),n("ol",[n("li",[n("p",[n("strong",[s._v("使用mysqld_safe启动")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysqld_safe --user=mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("使用service mysql start启动")])]),s._v(" "),n("p",[s._v("内部还是使用的mysqld_safe命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("service mysql start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])]),s._v(" "),n("h2",{attrs:{id:"启动多个mysql实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动多个mysql实例"}},[s._v("#")]),s._v(" 启动多个mysql实例")]),s._v(" "),n("p",[s._v("在机器有限的环境下我们通常会这么干，而且mysql也支持这样的操作。")]),s._v(" "),n("p",[s._v("如果要运行多个mysql实例首先要生成多个mysql的data目录，每个实例一个data目录，可以通过下面命令这样：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 实例1\nmysqld --defaults-file=/root/mysql/my1.cnf --initialize --user=mysql\n# 实例2\nmysqld --defaults-file=/root/mysql/my2.cnf --initialize --user=mysql\n# 实例3\nmysqld --defaults-file=/root/mysql/my3.cnf --initialize --user=mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("启动多个实例会导致"),n("code",[s._v("service mysql start")]),s._v("命令失效，因为mysqld默认是从固定的几个位置查找my.cnf的，而我的配置文件可能不在这几个默认位置。")]),s._v(" "),n("p",[s._v("所以暂时只能使用mysqld_safe方式来启动mysql服务：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysqld_safe --defaults-file=/root/mysql/my1.cnf --user=mysql\nmysqld_safe --defaults-file=/root/mysql/my2.cnf --user=mysql\nmysqld_safe --defaults-file=/root/mysql/my3.cnf --user=mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如果你有能力修改"),n("code",[s._v("/usr/local/mysql/supper-files/mysql.server")]),s._v("文件也可以通过复制多分，分别修改对应的数据目录，并移动到"),n("code",[s._v("/etc/init.d/")]),s._v("目录下，如："),n("code",[s._v("/etc/init.d/mysql1")]),s._v(" "),n("code",[s._v("/etc/init.d/mysql2")]),s._v(" "),n("code",[s._v("/etc/init.d/mysql3")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("service mysql1 start\nservice mysql2 start\nservice mysql3 start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("修该方法也很简单，只要打开"),n("code",[s._v("/usr/local/mysql/support-files/mysql.server")]),s._v("文件找到下面这行：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 指定实例的datadir目录即可\ndatadir=\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("当然我们还需要在my*.cnf文件中加上下面这句话，因为多个mysql实例不能共用一个socket文件："),n("code",[s._v("/tmp/mysql.socket.lock")])]),s._v(" "),n("p",[n("code",[s._v("my*.cnf")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# my1.cnf\n[mysqld]\nsocket=/tmp/mysql.socket.lock.1\n\n# my2.cnf\n[mysqld]\nsocket=/tmp/mysql.socket.lock.2\n\n# my3.cnf\n[mysqld]\nsocket=/tmp/mysql.socket.lock.3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"启动多个mysql实例的正确做法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动多个mysql实例的正确做法"}},[s._v("#")]),s._v(" 启动多个mysql实例的正确做法")]),s._v(" "),n("p",[s._v("我们也看到了上面的方式启动多个mysql实例甚是麻烦，所以mysql提供了"),n("code",[s._v("mysqld_multi")]),s._v("命令来帮助我们解决这个问题，我们不再需要同时定义多个my.cnf文件，只要一个就够了，配置文件如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[mysqld_multi]\nmysqld=/usr/local/mysql/bin/mysqld_safe\nmysqladmin=/usr/local/mysql/bin/mysqladmin\nuser=multi_admin\n# 官方例子中为password，实测无效，估计是不同版本有改动，需要改为pass\npass=123456\nlog=/mysql/log\n\n[mysqld1]\nport=3306\ndatadir=/mysql/3306/data\n# 每个服务都有一个进程，所以需要指定多个socket文件\nsocket=/mysql/3306/mysql.sock\n# 使用root账户启动，如果非root账户，则需要注意文件/目录的权限问题\nuser=root\n\n[mysqld2]\nport=3307\ndatadir=/mysql/3307/data\nsocket=/mysql/3307/mysql.sock\nuser=root\n\n[mysqld3]\nport=3308\ndatadir=/mysql/3308/data\nsocket=/mysql/3308/mysql.sock\nuser=root\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h5",{attrs:{id:"启动某个mysql实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动某个mysql实例"}},[s._v("#")]),s._v(" 启动某个mysql实例")]),s._v(" "),n("p",[s._v("mysqld_multi支持一个配置文件中配置多个服务，服务的分隔方式是mysqld+数字，如下命令我们启动的是mysqld2的配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysqld_multi --defaults-file=/root/mysql/my_multi.cnf start 2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h5",{attrs:{id:"创建mysqladmin账户"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建mysqladmin账户"}},[s._v("#")]),s._v(" 创建mysqladmin账户")]),s._v(" "),n("p",[s._v("如果我们不配置mysqladmin的用户/密码，结果是只能start，不能stop，解决办法就是创建一个新用户，并赋予"),n("code",[s._v("shutdown")]),s._v("权限，当然root用户也可以。")]),s._v(" "),n("p",[s._v("上面我们定义了3个mysql服务，我们需要连接到三个服务分别创建相同的账号和密码。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 创建用户\nCREATE USER 'multi_admin'@'localhost' IDENTIFIED BY '123456';\n# 给用户添加shutdown权限\nGRANT SHUTDOWN ON *.* TO 'multi_admin'@'localhost';\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"相关工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关工具"}},[s._v("#")]),s._v(" 相关工具")]),s._v(" "),n("ol",[n("li",[s._v("mysql：客户端工具")]),s._v(" "),n("li",[s._v("mysqld：mysql服务")]),s._v(" "),n("li",[s._v("mysqld_safe: mysqld的守护进程，当使用kill -9 mysqld_pid关闭mysqld时，该守护进程会自动重启mysqld")]),s._v(" "),n("li",[s._v("mysqld_multi：管理多个mysqld的工具")]),s._v(" "),n("li",[s._v("mysqladmin：是一个执行管理操作的客户端程序。它可以用来检查服务器的配置和当前状态、创建和删除数据库等。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);