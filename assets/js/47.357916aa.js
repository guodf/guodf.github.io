(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{431:function(t,a,s){"use strict";s.r(a);var e=s(1),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"如何调试go源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何调试go源码"}},[t._v("#")]),t._v(" 如何调试go源码")]),t._v(" "),s("p",[s("code",[t._v("go版本:1.13.4")])]),t._v(" "),s("h3",{attrs:{id:"为什么要调试go源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么要调试go源码"}},[t._v("#")]),t._v(" 为什么要调试go源码")]),t._v(" "),s("p",[t._v("相信你有足够的理由让你尝试去调试go源码")]),t._v(" "),s("h3",{attrs:{id:"网络上已有的调试教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络上已有的调试教程"}},[t._v("#")]),t._v(" 网络上已有的调试教程")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("使用GDB,LLDB等工具命令行的方式调试")]),t._v(" "),s("p",[t._v("优点：工具强大，支持调试多种程序，不限于go")]),t._v(" "),s("p",[t._v("缺点：go不同版本编译的程序，可能需要不同版本的GDB才能调试，命令行麻烦")])]),t._v(" "),s("li",[s("p",[t._v("使用dlv命令行，或者vscode，Goland等ide工具")]),t._v(" "),s("p",[t._v("优点：go官方推荐，更强到的调试功能，多种ide工具支持")]),t._v(" "),s("p",[t._v("缺点：调试无法进入runtime等私有方法")])])]),t._v(" "),s("h3",{attrs:{id:"新调试教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新调试教程"}},[t._v("#")]),t._v(" 新调试教程")]),t._v(" "),s("p",[t._v("​\t该尝试基于第二种调试方式，然后配合go tool 命令进入源码")]),t._v(" "),s("h2",{attrs:{id:"需要做什么前期准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需要做什么前期准备"}},[t._v("#")]),t._v(" 需要做什么前期准备")]),t._v(" "),s("p",[s("strong",[t._v("1. 掌握一条命令")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编译你的代码并导出程序集信息")]),t._v("\ngo tool compile -S main.go "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" main.txt\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("2. 从上一条命令的产物中找对应源码行数的CALL指令")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主要代码")]),t._v("\n0x008f 00143 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main.go:7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\tCALL\truntime.fastrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("3. 打开Goland查找入口代码，并设置断点")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/go/gland-debug.png",alt:""}})]),t._v(" "),s("p",[t._v("如果启动调试后编辑器没有反应，可以作如下操作显示goroutings")]),t._v(" "),s("p",[s("img",{attrs:{src:"/go/gland-deubg-1.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"开启源码调试之旅"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启源码调试之旅"}},[t._v("#")]),t._v(" 开启源码调试之旅")]),t._v(" "),s("p",[t._v("下面是一个简单的例子")]),t._v(" "),s("p",[s("img",{attrs:{src:"/go/goland-debug-demo.png",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);